# 架构演进 TODO List

本项目目前的架构已能满足基本需求，但随着计算逻辑的复杂化和用户量的增加，建议按以下步骤进行架构演进。

## 第一阶段：工程化与质量保证 (短期)
- [x] **数据导入导出**: 在网页端支持用户所有资产配置方案 (Profiles) 的 JSON 导入与导出。
- [ ] **集成 Vitest**: 为 `services/` 下的回测算法建立高覆盖率的单元测试。
- [ ] **E2E 测试集成**: 引入 Playwright 或 Cypress 模拟用户操作，验证图表渲染和计算流。
- [ ] **代码规范强制**: 在 Docker 构建流中引入 `ESLint` 和 `Prettier` 检查。
- [ ] **环境变量管理**: 区分 `development`, `staging`, `production` 环境变量。

## 第二阶段：性能优化 (中期)
- [ ] **Web Workers 异步计算**: 将繁重的回测计算逻辑移出主线程，防止 UI 阻塞。
- [ ] **计算缓存 (IndexedDB)**: 将历史价格数据和模拟结果缓存在本地，减少重复计算。
- [ ] **体积优化**: 启用 Vite 的分包策略 (Manual Chunks)，减小首屏 JS 加载体积。
- [ ] **离线支持**: 引入 PWA (Workbox)，支持离线进行回测模拟。

## 第三阶段：后端与持久化 (长期)
- [ ] **轻量级后端**: 如果需要跨端同步，引入轻量级后端 (如 FastAPI 或 Node.js)。
- [ ] **数据库存储**: 将策略配置和历史记录持久化到数据库。
- [ ] **多端分发**: 利用 Capacitor 进一步优化移动端体验，发布到 App Store。

## 第四阶段：监控与分析
- [ ] **错误追踪**: 集成 Sentry 监控回测计算中的边界情况错误。
- [ ] **性能监控**: 监控回测任务的执行耗时，针对性优化热点函数。
